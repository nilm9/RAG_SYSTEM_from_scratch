ptsstructured_outputs often uses tool callingdocsconceptstool_calling underthehood This typically involves the generation of AI messagesdocsconceptsmessagesaimessage containing tool calls as well as tool messagesdocsconceptsmessagestoolmessage containing the results of tool calls What should a sequence of messages look like in this case Different chat model providersdocsintegrationschat impose different requirements for valid message sequences Some will accept a repeating message sequence of the form  User 