ured_outputs for this purpose Here we define a query as containing a string query and a document section either beginning middle or end but this can be defined however you like Finally we add a step to our LangGraph application to generate a query from the users raw input We can test our implementation by specifically asking for context from the end of the post Note that the model includes different information in its answer In both the streamed steps and the LangSmith tracehttpssmithlangchaincompublicbdbaa